function [PMi, covNP, posteYgrupo, idx] = ClusteringKalman(nubePtos, distCluster, cantCluster)
    % Clustering postes Global total
    [idx, ~] = dbscan(nubePtos, distCluster, cantCluster);  % (data, dist max entre Vecinos, nï¿½Min de Vecinos para formar grupo)

    % Largo de Clustering (si hay ruido del cluster (-1), no lo considera)
    if idx(idx <0)
        largoGrupos = length(unique(idx))-1;
    else
        largoGrupos = length(unique(idx));
    end
    
    % Analisis punto medio por grupo y clasificacion
    PMi = zeros(largoGrupos, 2);
    posteYgrupo = zeros(largoGrupos, 1);
    
    % Inicializacion Covarianza de postes 
    covNP= cell(largoGrupos,1);
    
   
    for i = 1:largoGrupos
        % Separacion por grupo
        iGrupo = nubePtos(idx == i, :);
        
        promX = mean(iGrupo(:,1));
        promX = mean(iGrupo(:,1));
        
%         iVertices = unique(iGrupo(convhull(iGrupo), :), 'rows'); % borra punto final = punto inicial 
%         
%         % Distancia entre vertices del grupo
%         distGi = zeros(length(iVertices));
%         for j=1:length(iVertices)
%             for k=1:length(iVertices)
%                 distGi(j,k) = norm(iVertices(j,:) - iVertices(k,:));
%             end
%         end
% 
%         % Encuentra distancia maxima entre vertices del grupo
%         [a, ~] = find(distGi == max(max(distGi)));
%         pGi = [iVertices(a(1),:); iVertices(a(2),:)];
%         PMi(i,:) = (pGi(1,:) + pGi(2,:))/2;              % poste estimado

               
        % Obtencion Matriz Covarianza de cada caracteristica estimada
        vX = var(nubePtos( idx==i , 1));
        vY = var(nubePtos( idx==i , 2));
        covNP{i} = [vX 0; 0 vY];

   
    end
end